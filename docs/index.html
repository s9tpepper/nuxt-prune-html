<!DOCTYPE html><html data-n-head-ssr="" lang="en" data-n-head="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D"><head><title>@luxdamore/nuxt-prune-html - 🔌⚡ Nuxt module to prune html before sending it to the browser (it removes elements matching CSS selector(s)), useful for boosting performance showing a different HTML for bots/audits by removing all the scripts with dynamic rendering</title><meta data-hid="charset" charset="utf-8"><meta data-hid="description" name="description" content="🔌⚡ Nuxt module to prune html before sending it to the browser (it removes elements matching CSS selector(s)), useful for boosting performance showing a different HTML for bots/audits by removing all the scripts with dynamic rendering"><meta data-hid="keywords" name="keywords" content="nuxt-module,vuejs,nuxtjs,nuxt,modules,performance,optimize,optimization,optimization-algorithms,cheerio,html,prune,pruning,bot,lighthouse,audit,web-vitals,pagespeed-insight,dynamic-rendering,measure"><meta data-hid="msapplication-tap-highlight" name="msapplication-tap-highlight" content="no"><meta data-n-head="ssr" name="msapplication-config" content="/browserconfig.xml"><meta data-n-head="ssr" data-hid="viewport" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" data-hid="mobile-web-app-capable" name="mobile-web-app-capable" content="yes"><meta data-n-head="ssr" data-hid="apple-mobile-web-app-title" name="apple-mobile-web-app-title" content="@luxdamore/nuxt-prune-html"><meta data-n-head="ssr" data-hid="author" name="author" content="Luca Iaconelli <lucabelli@msn.com> (https://lucaiaconelli.it)"><meta data-n-head="ssr" data-hid="theme-color" name="theme-color" content="#42b883"><meta data-n-head="ssr" data-hid="og:type" name="og:type" property="og:type" content="website"><meta data-n-head="ssr" data-hid="og:title" name="og:title" property="og:title" content="@luxdamore/nuxt-prune-html"><meta data-n-head="ssr" data-hid="og:site_name" name="og:site_name" property="og:site_name" content="@luxdamore/nuxt-prune-html"><meta data-n-head="ssr" data-hid="og:description" name="og:description" property="og:description" content="🔌⚡ Nuxt module to prune html before sending it to the browser (it removes elements matching CSS selector(s)), useful for boosting performance showing a different HTML for bots/audits by removing all the scripts with dynamic rendering"><meta data-n-head="ssr" data-hid="og:url" name="og:url" property="og:url" content="https://luxdamore.github.io/nuxt-prune-html"><meta data-n-head="ssr" data-hid="og:image" name="og:image" property="og:image" content="https://luxdamore.github.io/nuxt-prune-html/nuxt-prune-html/_nuxt/icons/icon_512x512.fc1071.png"><meta data-n-head="ssr" data-hid="og:image:width" name="og:image:width" property="og:image:width" content="512"><meta data-n-head="ssr" data-hid="og:image:height" name="og:image:height" property="og:image:height" content="512"><meta data-n-head="ssr" data-hid="og:image:type" name="og:image:type" property="og:image:type" content="image/png"><meta data-n-head="ssr" data-hid="twitter:creator" name="twitter:creator" property="twitter:creator" content="@luxdamore"><base href="/nuxt-prune-html/"><link rel="shortcut icon" data-hid="favicon" type="image/x-icon" href="/nuxt-prune-htmlfavicon.ico"><link data-n-head="ssr" data-hid="shortcut-icon" rel="shortcut icon" href="/nuxt-prune-html/_nuxt/icons/icon_64x64.fc1071.png"><link data-n-head="ssr" data-hid="apple-touch-icon" rel="apple-touch-icon" href="/nuxt-prune-html/_nuxt/icons/icon_512x512.fc1071.png" sizes="512x512"><link data-n-head="ssr" rel="manifest" href="/nuxt-prune-html/_nuxt/manifest.d0df1b19.json" data-hid="manifest"><script data-n-head="ssr" data-hid="nuxt-jsonld--5196826c" type="application/ld+json">{"@context":"https://schema.org/","@type":"SoftwareSourceCode","programmingLanguage":"Javascript","targetProduct":"NuxtJs, VueJs","name":"@luxdamore/nuxt-prune-html","description":"🔌⚡ Nuxt module to prune html before sending it to the browser (it removes elements matching CSS selector(s)), useful for boosting performance showing a different HTML for bots/audits by removing all the scripts with dynamic rendering","about":"🔌⚡ Nuxt module to prune html before sending it to the browser (it removes elements matching CSS selector(s)), useful for boosting performance showing a different HTML for bots/audits by removing all the scripts with dynamic rendering","author":"Luca Iaconelli <lucabelli@msn.com> (https://lucaiaconelli.it)","url":"https://luxdamore.github.io/nuxt-prune-html","codeSampleType":"https://luxdamore.github.io/nuxt-prune-html","workExample":"https://luxdamore.github.io/nuxt-prune-html","codeRepository":"https://luxdamore.github.io/nuxt-prune-html"}</script><style data-vue-ssr-id="e3e6e6f4:0">.nuxt-progress{position:fixed;top:0;left:0;right:0;height:23px;width:0;opacity:1;transition:width .1s,opacity .4s;background-color:#42b883;z-index:999999}.nuxt-progress.nuxt-progress-notransition{transition:none}.nuxt-progress-failed{background-color:#e74c3c}</style><style data-vue-ssr-id="11b845c4:0">.hljs{display:block;overflow-x:auto;padding:.5em;color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><style data-vue-ssr-id="55df1aab:0">.markdown-body .octicon{display:inline-block;fill:currentColor;vertical-align:text-bottom}.markdown-body .anchor{float:left;line-height:1;margin-left:-20px;padding-right:4px}.markdown-body .anchor:focus{outline:0}.markdown-body h1 .octicon-link,.markdown-body h2 .octicon-link,.markdown-body h3 .octicon-link,.markdown-body h4 .octicon-link,.markdown-body h5 .octicon-link,.markdown-body h6 .octicon-link{color:#1b1f23;vertical-align:middle;visibility:hidden}.markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor{text-decoration:none}.markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link{visibility:visible}.markdown-body h1:hover .anchor .octicon-link:before,.markdown-body h2:hover .anchor .octicon-link:before,.markdown-body h3:hover .anchor .octicon-link:before,.markdown-body h4:hover .anchor .octicon-link:before,.markdown-body h5:hover .anchor .octicon-link:before,.markdown-body h6:hover .anchor .octicon-link:before{width:16px;height:16px;content:" ";display:inline-block;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' aria-hidden='true'%3E%3Cpath fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z'/%3E%3C/svg%3E")}.markdown-body{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;color:#24292e;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;font-size:16px;line-height:1.5;word-wrap:break-word}.markdown-body details{display:block}.markdown-body summary{display:list-item}.markdown-body a{background-color:transparent;background-color:initial}.markdown-body a:active,.markdown-body a:hover{outline-width:0}.markdown-body strong{font-weight:inherit;font-weight:bolder}.markdown-body h1{margin:.67em 0}.markdown-body img{border-style:none}.markdown-body code,.markdown-body kbd,.markdown-body pre{font-family:monospace,monospace;font-size:1em}.markdown-body hr{box-sizing:content-box;box-sizing:initial;overflow:visible}.markdown-body input{font:inherit;margin:0;overflow:visible}.markdown-body [type=checkbox]{box-sizing:border-box;padding:0}.markdown-body *{box-sizing:border-box}.markdown-body input{font-family:inherit;font-size:inherit;line-height:inherit}.markdown-body a{color:#0366d6;text-decoration:none}.markdown-body a:hover{text-decoration:underline}.markdown-body strong{font-weight:600}.markdown-body hr{height:0;margin:15px 0;overflow:hidden;background:0 0;border-bottom:1px solid #dfe2e5}.markdown-body hr:after,.markdown-body hr:before{display:table;content:""}.markdown-body hr:after{clear:both}.markdown-body table{border-spacing:0;border-collapse:collapse}.markdown-body td,.markdown-body th{padding:0}.markdown-body details summary{cursor:pointer}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:0;margin-bottom:0}.markdown-body h1{font-size:32px}.markdown-body h1,.markdown-body h2{font-weight:600}.markdown-body h2{font-size:24px}.markdown-body h3{font-size:20px}.markdown-body h3,.markdown-body h4{font-weight:600}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:14px}.markdown-body h5,.markdown-body h6{font-weight:600}.markdown-body h6{font-size:12px}.markdown-body p{margin-top:0;margin-bottom:10px}.markdown-body blockquote{margin:0}.markdown-body ol,.markdown-body ul{padding-left:0;margin-top:0;margin-bottom:0}.markdown-body ol ol,.markdown-body ul ol{list-style-type:lower-roman}.markdown-body ol ol ol,.markdown-body ol ul ol,.markdown-body ul ol ol,.markdown-body ul ul ol{list-style-type:lower-alpha}.markdown-body dd{margin-left:0}.markdown-body code,.markdown-body pre{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px}.markdown-body pre{margin-top:0;margin-bottom:0}.markdown-body input::-webkit-inner-spin-button,.markdown-body input::-webkit-outer-spin-button{margin:0;-webkit-appearance:none;appearance:none}.markdown-body :checked+.radio-label{position:relative;z-index:1;border-color:#0366d6}.markdown-body .border{border:1px solid #e1e4e8!important}.markdown-body .border-0{border:0!important}.markdown-body .border-bottom{border-bottom:1px solid #e1e4e8!important}.markdown-body .rounded-1{border-radius:3px!important}.markdown-body .bg-white{background-color:#fff!important}.markdown-body .bg-gray-light{background-color:#fafbfc!important}.markdown-body .text-gray-light{color:#6a737d!important}.markdown-body .pl-3,.markdown-body .px-3{padding-left:16px!important}.markdown-body .px-3{padding-right:16px!important}.markdown-body .f6{font-size:12px!important}.markdown-body .lh-condensed{line-height:1.25!important}.markdown-body .text-bold{font-weight:600!important}.markdown-body .pl-c{color:#6a737d}.markdown-body .pl-c1,.markdown-body .pl-s .pl-v{color:#005cc5}.markdown-body .pl-e,.markdown-body .pl-en{color:#6f42c1}.markdown-body .pl-s .pl-s1,.markdown-body .pl-smi{color:#24292e}.markdown-body .pl-ent{color:#22863a}.markdown-body .pl-k{color:#d73a49}.markdown-body .pl-pds,.markdown-body .pl-s,.markdown-body .pl-s .pl-pse .pl-s1,.markdown-body .pl-sr,.markdown-body .pl-sr .pl-cce,.markdown-body .pl-sr .pl-sra,.markdown-body .pl-sr .pl-sre{color:#032f62}.markdown-body .pl-smw,.markdown-body .pl-v{color:#e36209}.markdown-body .pl-bu{color:#b31d28}.markdown-body .pl-ii{color:#fafbfc;background-color:#b31d28}.markdown-body .pl-c2{color:#fafbfc;background-color:#d73a49}.markdown-body .pl-c2:before{content:"^M"}.markdown-body .pl-sr .pl-cce{font-weight:700;color:#22863a}.markdown-body .pl-ml{color:#735c0f}.markdown-body .pl-mh,.markdown-body .pl-mh .pl-en,.markdown-body .pl-ms{font-weight:700;color:#005cc5}.markdown-body .pl-mi{font-style:italic;color:#24292e}.markdown-body .pl-mb{font-weight:700;color:#24292e}.markdown-body .pl-md{color:#b31d28;background-color:#ffeef0}.markdown-body .pl-mi1{color:#22863a;background-color:#f0fff4}.markdown-body .pl-mc{color:#e36209;background-color:#ffebda}.markdown-body .pl-mi2{color:#f6f8fa;background-color:#005cc5}.markdown-body .pl-mdr{font-weight:700;color:#6f42c1}.markdown-body .pl-ba{color:#586069}.markdown-body .pl-sg{color:#959da5}.markdown-body .pl-corl{text-decoration:underline;color:#032f62}.markdown-body .mb-0{margin-bottom:0!important}.markdown-body .my-2{margin-bottom:8px!important;margin-top:8px!important}.markdown-body .pl-0{padding-left:0!important}.markdown-body .py-0{padding-top:0!important;padding-bottom:0!important}.markdown-body .pl-1{padding-left:4px!important}.markdown-body .pl-2{padding-left:8px!important}.markdown-body .py-2{padding-top:8px!important;padding-bottom:8px!important}.markdown-body .pl-3{padding-left:16px!important}.markdown-body .pl-4{padding-left:24px!important}.markdown-body .pl-5{padding-left:32px!important}.markdown-body .pl-6{padding-left:40px!important}.markdown-body .pl-7{padding-left:48px!important}.markdown-body .pl-8{padding-left:64px!important}.markdown-body .pl-9{padding-left:80px!important}.markdown-body .pl-10{padding-left:96px!important}.markdown-body .pl-11{padding-left:112px!important}.markdown-body .pl-12{padding-left:128px!important}.markdown-body hr{border-bottom-color:#eee}.markdown-body kbd{display:inline-block;padding:3px 5px;font:11px SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;line-height:10px;color:#444d56;vertical-align:middle;background-color:#fafbfc;border:1px solid #d1d5da;border-radius:3px;box-shadow:inset 0 -1px 0 #d1d5da}.markdown-body:after,.markdown-body:before{display:table;content:""}.markdown-body:after{clear:both}.markdown-body>:first-child{margin-top:0!important}.markdown-body>:last-child{margin-bottom:0!important}.markdown-body a:not([href]){color:inherit;text-decoration:none}.markdown-body blockquote,.markdown-body details,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{margin-top:0;margin-bottom:16px}.markdown-body hr{height:.25em;padding:0;margin:24px 0;background-color:#e1e4e8;border:0}.markdown-body blockquote{padding:0 1em;color:#6a737d;border-left:.25em solid #dfe2e5}.markdown-body blockquote>:first-child{margin-top:0}.markdown-body blockquote>:last-child{margin-bottom:0}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:24px;margin-bottom:16px;font-weight:600;line-height:1.25}.markdown-body h1{font-size:2em}.markdown-body h1,.markdown-body h2{padding-bottom:.3em;border-bottom:1px solid #eaecef}.markdown-body h2{font-size:1.5em}.markdown-body h3{font-size:1.25em}.markdown-body h4{font-size:1em}.markdown-body h5{font-size:.875em}.markdown-body h6{font-size:.85em;color:#6a737d}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:0;margin-bottom:0}.markdown-body li{word-wrap:break-all}.markdown-body li>p{margin-top:16px}.markdown-body li+li{margin-top:.25em}.markdown-body dl{padding:0}.markdown-body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:600}.markdown-body dl dd{padding:0 16px;margin-bottom:16px}.markdown-body table{display:block;width:100%;overflow:auto}.markdown-body table th{font-weight:600}.markdown-body table td,.markdown-body table th{padding:6px 13px;border:1px solid #dfe2e5}.markdown-body table tr{background-color:#fff;border-top:1px solid #c6cbd1}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}.markdown-body img{max-width:100%;box-sizing:content-box;box-sizing:initial;background-color:#fff}.markdown-body img[align=right]{padding-left:20px}.markdown-body img[align=left]{padding-right:20px}.markdown-body code{padding:.2em .4em;margin:0;font-size:85%;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body pre{word-wrap:normal}.markdown-body pre>code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:0 0;border:0}.markdown-body .highlight{margin-bottom:16px}.markdown-body .highlight pre{margin-bottom:0;word-break:normal}.markdown-body .highlight pre,.markdown-body pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f6f8fa;border-radius:3px}.markdown-body pre code{display:inline;max-width:auto;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;background-color:initial;border:0}.markdown-body .commit-tease-sha{display:inline-block;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:90%;color:#444d56}.markdown-body .full-commit .btn-outline:not(:disabled):hover{color:#005cc5;border-color:#005cc5}.markdown-body .blob-wrapper{overflow-x:auto;overflow-y:hidden}.markdown-body .blob-wrapper-embedded{max-height:240px;overflow-y:auto}.markdown-body .blob-num{width:1%;min-width:50px;padding-right:10px;padding-left:10px;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;line-height:20px;color:rgba(27,31,35,.3);text-align:right;white-space:nowrap;vertical-align:top;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-body .blob-num:hover{color:rgba(27,31,35,.6)}.markdown-body .blob-num:before{content:attr(data-line-number)}.markdown-body .blob-code{position:relative;padding-right:10px;padding-left:10px;line-height:20px;vertical-align:top}.markdown-body .blob-code-inner{overflow:visible;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;color:#24292e;word-wrap:normal;white-space:pre}.markdown-body .pl-token.active,.markdown-body .pl-token:hover{cursor:pointer;background:#ffea7f}.markdown-body .tab-size[data-tab-size="1"]{-moz-tab-size:1;-o-tab-size:1;tab-size:1}.markdown-body .tab-size[data-tab-size="2"]{-moz-tab-size:2;-o-tab-size:2;tab-size:2}.markdown-body .tab-size[data-tab-size="3"]{-moz-tab-size:3;-o-tab-size:3;tab-size:3}.markdown-body .tab-size[data-tab-size="4"]{-moz-tab-size:4;-o-tab-size:4;tab-size:4}.markdown-body .tab-size[data-tab-size="5"]{-moz-tab-size:5;-o-tab-size:5;tab-size:5}.markdown-body .tab-size[data-tab-size="6"]{-moz-tab-size:6;-o-tab-size:6;tab-size:6}.markdown-body .tab-size[data-tab-size="7"]{-moz-tab-size:7;-o-tab-size:7;tab-size:7}.markdown-body .tab-size[data-tab-size="8"]{-moz-tab-size:8;-o-tab-size:8;tab-size:8}.markdown-body .tab-size[data-tab-size="9"]{-moz-tab-size:9;-o-tab-size:9;tab-size:9}.markdown-body .tab-size[data-tab-size="10"]{-moz-tab-size:10;-o-tab-size:10;tab-size:10}.markdown-body .tab-size[data-tab-size="11"]{-moz-tab-size:11;-o-tab-size:11;tab-size:11}.markdown-body .tab-size[data-tab-size="12"]{-moz-tab-size:12;-o-tab-size:12;tab-size:12}.markdown-body .task-list-item{list-style-type:none}.markdown-body .task-list-item+.task-list-item{margin-top:3px}.markdown-body .task-list-item input{margin:0 .2em .25em -1.6em;vertical-align:middle}</style><style data-vue-ssr-id="113c3f9c:0">.readme[data-v-13e3c915]>section>p:nth-child(2){display:flex;flex:1 1 100%;flex-direction:row;flex-wrap:nowrap;min-height:36px;padding:6px 12px;overflow-x:auto;font-size:0;background-color:rgba(220,230,240,.63);border-radius:5px}.readme[data-v-13e3c915] a{display:inline-block;margin:2px 1px}.readme[data-v-13e3c915] blockquote{margin:1rem auto;padding:4px 0 4px 1.5rem;color:#819198;border-left:.3rem solid #dce6f0}.readme[data-v-13e3c915] blockquote p{margin:0}.readme[data-v-13e3c915] code{display:inline-block;padding:0 3px;overflow-y:hidden;vertical-align:middle;background-color:#dce6f0;border-radius:6px}.readme[data-v-13e3c915] pre code{display:block;padding:.5em;overflow-x:auto;vertical-align:inherit;background-color:#f8f8f8}</style></head><body><div data-server-rendered="true" id="__nuxt"><div id="__layout"><main class="container"><article class="readme markdown-body" data-v-13e3c915=""><section><p>export default "</p><section><p>export default "</p><section><p>export default "</p><section><p>export default "</p><section><p>export default "</p><section><h1>🔌⚡ Nuxt Prune HTML</h1>\n<p>&lt;a href="https://luxdamore.github.io/nuxt-prune-html/"&gt;&lt;img src="https://img.shields.io/badge/code%20quality-A-informational?style=flat" alt="Code Quality"&gt;<br>\n&lt;a href="https://npmjs.com/package/@luxdamore/nuxt-prune-html"&gt;&lt;img src="https://img.shields.io/npm/dt/@luxdamore/nuxt-prune-html.svg?style=flat&amp;color=darkgreen" alt="Downloads"&gt;<br>\n&lt;a href="https://npmjs.com/package/@luxdamore/nuxt-prune-html"&gt;&lt;img src="https://img.shields.io/badge/dependencies-up%20to%20date-darkgreen.svg?style=flat" alt="Dependencies"&gt;<br>\n&lt;a href="https://circleci.com/gh/LuXDAmore/nuxt-prune-html"&gt;&lt;img src="https://img.shields.io/circleci/project/github/LuXDAmore/nuxt-prune-html.svg?style=flat&amp;color=darkgreen" alt="Circle CI"&gt;<br>\n&lt;a href="https://npmjs.com/package/@luxdamore/nuxt-prune-html"&gt;&lt;img src="https://img.shields.io/npm/v/@luxdamore/nuxt-prune-html/latest.svg?style=flat&amp;color=darkorange&amp;label=version" alt="Version"&gt;<br>\n&lt;a href="https://www.paypal.me/luxdamore"&gt;&lt;img src="https://img.shields.io/badge/paypal-donate-black.svg?style=flat" alt="Donate"&gt;</p>\n<blockquote>\n<p>Nuxt module to prune html before sending it to the browser (it removes elements matching CSS selector(s)), useful for boosting performance showing a different HTML for bots/audits by removing all the scripts with dynamic rendering.</p>\n</blockquote>\n<h2>💘 Motivation</h2>\n<p>Due to the versatility of Nuxt (and of the SSR in general), a website generated (or served) via node server, has everything it needs already injected in the HTML (ex.<em>css styles</em>). So, usually, for a bot, a audit or for a human, the website its almost visually the same with or without Javascript.</p>\n<p>This library is born to remove all the scripts injected into the HTML<strong>only</strong>if a visitor is a<strong>Bot</strong>or a<strong>Performance Audit</strong>(ex.<em>a Lighthouse Audit</em>).<br>\nThis should<strong>speed up</strong>(<strong>blazing fast</strong>) your<em>nuxt-website</em>up to a value of<strong>~99</strong>in<strong>performance</strong>because it &lt;a href="https://web.dev/lighthouse-performance/"&gt;cheats various scenarios.</p>\n<p>Usually, with<strong>less assets, resources and html</strong>to download, the number of urls crawled by a bot are<strong>widely boosted</strong>📈.</p>\n<blockquote>\n<p>Inspired by this &lt;a href="https://github.com/nuxt/rfcs/issues/22"&gt;rcfsand this &lt;a href="https://github.com/nuxt/nuxt.js/issues/2822"&gt;issue.</p>\n</blockquote>\n<h3>Features</h3>\n<ul>\n<li>Prune based on<strong>default detection</strong>;\n<ul>\n<li>match the<strong>user-agent</strong>;</li>\n<li>match a<strong>bot</strong>;</li>\n<li>match an<strong>audit</strong>;</li>\n<li>match a<strong>custom-header</strong>;</li>\n</ul>\n</li>\n<li>Prune based on<strong>headers values</strong>(<em>useful in/for Lambdas</em>);</li>\n<li>Prune based on<strong>query parameters</strong>(<em>useful during navigation, hybrid-experience</em>).</li>\n</ul>\n<h3>Pro et contra</h3>\n<blockquote>\n<p>This could cause some unexpected behaviors, but..</p>\n</blockquote>\n<p><strong>Cons.:</strong></p>\n<ul>\n<li>No &lt;a href="https://nuxtjs.org/docs/2.x/concepts/server-side-rendering/#server-side-rendering-steps-with-nuxtjs"&gt;<code>SPA routing</code>on<code>client-side</code>for<strong>bots and audits</strong>;</li>\n<li>No &lt;a href="https://ssr.vuejs.org/guide/hydration.html"&gt;<code>hydration</code>on<code>client-side</code>for<strong>bots and audits</strong>:\n<ul>\n<li>ex. &lt;a href="https://github.com/maoberlehner/vue-lazy-hydration"&gt;<code>vue-lazy-hydration</code>need<strong>Javascript client-side code</strong>to trigger<em>hydrateOnInteraction</em>,<em>hydrateWhenIdle</em>or<em>hydrateWhenVisible</em>;</li>\n</ul>\n</li>\n<li>No &lt;a href="https://nuxtjs.org/api/components-client-only/"&gt;<code>&lt;client-only&gt;</code>components;</li>\n<li>Can break<code>lazy-load</code>for images.</li>\n</ul>\n<p><strong>Pros.:</strong></p>\n<ul>\n<li>Some of these features<strong>aren't "used by"</strong>a bot/audit, so you don't really need them:\n<ul>\n<li>bots doesn't handle<code>SPA routing</code>;</li>\n<li>&lt;a href="https://nuxtjs.org/api/components-client-only/"&gt;<code>&lt;client-only&gt;</code>componentscould lead in a slower TTI;</li>\n<li>&lt;a href="https://nuxtjs.org/api/components-client-only/"&gt;<code>&lt;client-only&gt;</code>componentscan contain a &lt;a href="https://nuxtjs.org/api/components-client-only/"&gt;static placeholder;</li>\n</ul>\n</li>\n<li>Images with<code>lazy-load</code>can be fixed with a &lt;a href="https://web.dev/native-lazy-loading/"&gt;native attribute, with a custom<code>script</code>or with<code>classesSelectorsToKeep</code>(<em>check the configuration</em>);</li>\n<li><code>Hydration</code><strong>decrease</strong>performance, so it's ok to prune it for<code>bots or audits</code>;</li>\n<li><strong>Less HTML, assets and resources</strong>are served to browsers and clients;</li>\n<li>Bot/audit only have<em>the Javascript they need</em>;</li>\n<li>With<strong>less assets</strong>to download, the number of urls crawled are<strong>widely boosted</strong>;</li>\n<li>Bots, &lt;a href="https://developers.google.com/speed/pagespeed/insights/"&gt;PageSpeed Insights, &lt;a href="https://web.dev/measure/"&gt;Google Measureand &lt;a href="https://developers.google.com/web/tools/lighthouse"&gt;Lighthouse Auditare already pruned by the plugin with the default configuration;</li>\n<li>Faster &lt;a href="https://web.dev/vitals/"&gt;web-vitals, faster TTI, faster FCP, faster FMP,<strong>faster all</strong>.</li>\n</ul>\n<p><strong>N.B.:</strong><em>This is known as &lt;a href="https://developers.google.com/search/docs/guides/dynamic-rendering"&gt;Dynamic Renderingand<strong>it's not</strong>considered &lt;a href="https://www.wordstream.com/black-hat-seo"&gt;black-hator &lt;a href="https://en.wikipedia.org/wiki/Cloaking"&gt;cloaking</em>.</p>\n<hr>\n<h4>💡 Lighthouse</h4>\n<p>&lt;img src="lighthouse/before.jpg" alt="Lighthouse Audit before"&gt;<br>\n&lt;img src="lighthouse/after.jpg" alt="Lighthouse Audit after"&gt;</p>\n<hr>\n<h2>Setup</h2>\n<ol>\n<li><strong>Install</strong><code>@luxdamore/nuxt-prune-html</code>as a dependency:\n<ul>\n<li><code>yarn add @luxdamore/nuxt-prune-html</code>;</li>\n<li>or,<code>npm install --save @luxdamore/nuxt-prune-html</code>;</li>\n</ul>\n</li>\n<li><strong>Append</strong><code>@luxdamore/nuxt-prune-html</code>to the<code>modules</code>array of your<code>nuxt.config.js</code>.</li>\n</ol>\n<h2>Configuration</h2>\n<pre>&lt;code class="language-js"&gt;\n    &lt;span class="hljs-comment"&gt;// nuxt.config.js\n    &lt;span class="hljs-keyword"&gt;export &lt;span class="hljs-keyword"&gt;default {\n\n        &lt;span class="hljs-comment"&gt;// Module - installation\n        &lt;span class="hljs-attr"&gt;modules: [ &lt;span class="hljs-string"&gt;'@luxdamore/nuxt-prune-html' ],\n\n        &lt;span class="hljs-comment"&gt;// Module - default config\n        &lt;span class="hljs-attr"&gt;pruneHtml: {\n            &lt;span class="hljs-attr"&gt;enabled: &lt;span class="hljs-literal"&gt;false, &lt;span class="hljs-comment"&gt;// <code>true</code> in production\n            &lt;span class="hljs-attr"&gt;hideGenericMessagesInConsole: &lt;span class="hljs-literal"&gt;false, &lt;span class="hljs-comment"&gt;// <code>false</code> in production\n            &lt;span class="hljs-attr"&gt;hideErrorsInConsole: &lt;span class="hljs-literal"&gt;false, &lt;span class="hljs-comment"&gt;// deactivate the <code>console.error</code> method\n            &lt;span class="hljs-attr"&gt;hookRenderRoute: &lt;span class="hljs-literal"&gt;true, &lt;span class="hljs-comment"&gt;// activate <code>hook:render:route</code>\n            &lt;span class="hljs-attr"&gt;hookGeneratePage: &lt;span class="hljs-literal"&gt;true, &lt;span class="hljs-comment"&gt;// activate <code>hook:generate:page</code>\n            &lt;span class="hljs-attr"&gt;selectors: [\n                &lt;span class="hljs-comment"&gt;// CSS selectors to prune\n                &lt;span class="hljs-string"&gt;'link[rel="preload"][as="script"]',\n                &lt;span class="hljs-string"&gt;'script:not([type="application/ld+json"])',\n            ],\n            &lt;span class="hljs-attr"&gt;classesSelectorsToKeep: [], &lt;span class="hljs-comment"&gt;// disallow pruning of scripts with this classes, n.b.: each <code>classesSelectorsToKeep</code> is appended to every <code>selectors</code>, ex.: <code>link[rel=&amp;quot;preload&amp;quot;][as=&amp;quot;script&amp;quot;]:not(<strong>classesSelectorsToKeep</strong>)</code>\n            &lt;span class="hljs-attr"&gt;link: [], &lt;span class="hljs-comment"&gt;// inject custom links, only if pruned\n            &lt;span class="hljs-attr"&gt;script: [], &lt;span class="hljs-comment"&gt;// inject custom scripts, only if pruned\n            &lt;span class="hljs-attr"&gt;htmlElementClass: &lt;span class="hljs-literal"&gt;null, &lt;span class="hljs-comment"&gt;// a string added as a class to the &lt;html&gt; element if pruned\n            &lt;span class="hljs-attr"&gt;cheerio: {\n                &lt;span class="hljs-comment"&gt;// the config passed to the <code>cheerio.load(<strong>config</strong>)</code> method\n                &lt;span class="hljs-attr"&gt;xmlMode: &lt;span class="hljs-literal"&gt;false,\n            },\n            &lt;span class="hljs-attr"&gt;types: [\n                &lt;span class="hljs-comment"&gt;// it's possibile to add different rules for pruning\n                &lt;span class="hljs-string"&gt;'default-detect',\n            ],\n\n            &lt;span class="hljs-comment"&gt;// 👇🏻 Type: <code>default-detect</code>\n            &lt;span class="hljs-attr"&gt;headerNameForDefaultDetection: &lt;span class="hljs-string"&gt;'user-agent', &lt;span class="hljs-comment"&gt;// The <code>header-key</code> base for <code>MobileDetection</code>, usage <code>request.headers[ headerNameForDefaultDetection ]</code>\n            &lt;span class="hljs-attr"&gt;auditUserAgent: &lt;span class="hljs-string"&gt;'lighthouse', &lt;span class="hljs-comment"&gt;// prune if <code>request.header[ headerNameForDefaultDetection ]</code> match, could be a string or an array of strings\n            &lt;span class="hljs-attr"&gt;isAudit: &lt;span class="hljs-literal"&gt;true, &lt;span class="hljs-comment"&gt;// remove selectors if match with <code>auditUserAgent</code>\n            &lt;span class="hljs-attr"&gt;isBot: &lt;span class="hljs-literal"&gt;true, &lt;span class="hljs-comment"&gt;// remove selectors if is a bot\n            &lt;span class="hljs-attr"&gt;ignoreBotOrAudit: &lt;span class="hljs-literal"&gt;false, &lt;span class="hljs-comment"&gt;// remove selectors in any case, not depending on Bot or Audit\n            &lt;span class="hljs-attr"&gt;matchUserAgent: &lt;span class="hljs-literal"&gt;null, &lt;span class="hljs-comment"&gt;// prune if <code>request.header[ headerNameForDefaultDetection ]</code> match, could be a string or an array of strings\n\n            &lt;span class="hljs-comment"&gt;// 👇🏻 Type: 'query-parameters'\n            &lt;span class="hljs-attr"&gt;queryParametersToPrune: [\n                &lt;span class="hljs-comment"&gt;// array of objects (key-value)\n                &lt;span class="hljs-comment"&gt;// trigger the pruning if 'query-parameters' is present in <code>types</code> and at least one value is matched, ex. <code>/?prune=true</code>\n                {\n                    &lt;span class="hljs-attr"&gt;key: &lt;span class="hljs-string"&gt;'prune',\n                    &lt;span class="hljs-attr"&gt;value: &lt;span class="hljs-string"&gt;'true',\n                },\n            ],\n            &lt;span class="hljs-attr"&gt;queryParametersToExcludePrune: [], &lt;span class="hljs-comment"&gt;// same as <code>queryParametersToPrune</code>, exclude the pruning if 'query-parameters' is present in <code>types</code> and at least one value is matched, this priority is over than <code>queryParametersToPrune</code>\n\n            &lt;span class="hljs-comment"&gt;// 👇🏻 Type: 'headers-exist'\n            &lt;span class="hljs-attr"&gt;headersToPrune: [], &lt;span class="hljs-comment"&gt;// same as <code>queryParametersToPrune</code>, but it checks <code>request.headers</code>\n            &lt;span class="hljs-attr"&gt;headersToExcludePrune: [], &lt;span class="hljs-comment"&gt;// same as <code>queryParamToExcludePrune</code>, but it checks <code>request.headers</code>, this priority is over than <code>headersToPrune</code>\n\n            &lt;span class="hljs-comment"&gt;// Emitted events for callbacks methods\n            &lt;span class="hljs-attr"&gt;onBeforePrune: &lt;span class="hljs-literal"&gt;null, &lt;span class="hljs-comment"&gt;// ({ result, [ req, res ] }) =&gt; {}, <code>req</code> and <code>res</code> are not available on <code>nuxt generate</code>\n            &lt;span class="hljs-attr"&gt;onAfterPrune: &lt;span class="hljs-literal"&gt;null, &lt;span class="hljs-comment"&gt;// ({ result, [ req, res ] }) =&gt; {}, <code>req</code> and <code>res</code> are not available on <code>nuxt generate</code>\n        },\n\n    };\n\n</pre>\n<p>With<code>link</code>and<code>script</code>it's possibile to add one or more objects on the pruned HTML, ex.:</p>\n<pre>&lt;code class="language-javascript"&gt;\n    &lt;span class="hljs-keyword"&gt;export &lt;span class="hljs-keyword"&gt;default {\n        &lt;span class="hljs-attr"&gt;pruneHtml: {\n            &lt;span class="hljs-attr"&gt;link: [\n                {\n                    &lt;span class="hljs-attr"&gt;rel: &lt;span class="hljs-string"&gt;'preload',\n                    &lt;span class="hljs-attr"&gt;as: &lt;span class="hljs-string"&gt;'script',\n                    &lt;span class="hljs-attr"&gt;href: &lt;span class="hljs-string"&gt;'/my-custom-lazy-load-for-bots.js',\n                    &lt;span class="hljs-attr"&gt;position: &lt;span class="hljs-string"&gt;'phead', &lt;span class="hljs-comment"&gt;// Default value is 'body', other allowed values are: 'phead', 'head' and 'pbody'\n                },\n                {\n                    &lt;span class="hljs-attr"&gt;rel: &lt;span class="hljs-string"&gt;'stylesheet',\n                    &lt;span class="hljs-attr"&gt;href: &lt;span class="hljs-string"&gt;'/my-custom-styles-for-bots.css',\n                    &lt;span class="hljs-attr"&gt;position: &lt;span class="hljs-string"&gt;'head',\n                },\n            ],\n            &lt;span class="hljs-attr"&gt;script: [\n                {\n                    &lt;span class="hljs-attr"&gt;src: &lt;span class="hljs-string"&gt;'/my-custom-lazy-load-for-bots.js',\n                    &lt;span class="hljs-attr"&gt;lazy: &lt;span class="hljs-literal"&gt;true,\n                    &lt;span class="hljs-attr"&gt;defer: &lt;span class="hljs-literal"&gt;true,\n                },\n            ],\n        },\n    };\n\n</pre>\n<blockquote>\n<p><strong>N.B.:</strong><em>the config is only shallow merged, not deep merged</em>.</p>\n</blockquote>\n<h3>Types / Rules</h3>\n<p>Possible values are<code>[ 'default-detect', 'query-parameters', 'headers-exist' ]</code>:</p>\n<ul>\n<li><code>default-detect</code>: prune based on<strong>one header</strong>(<code>request.headers[ headerNameForDefaultDetection ]</code>)\n<ul>\n<li>different checks with &lt;a href="https://hgoebl.github.io/mobile-detect.js/"&gt;MobileDetect:\n<ul>\n<li><code>isBot</code>, trigger<code>.is( 'bot' )</code>method;</li>\n<li><code>auditUserAgent</code>or<code>matchUserAgent</code>, trigger<code>.match()</code>method;</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><code>query-parameters</code>: prune based on<strong>one or more query parameter</strong>, tests<code>key / value</code>based on<code>queryParametersToPrune / queryParametersToExcludePrune</code>:\n<ul>\n<li>you can also specify routes in<code>nuxt.config</code>, ex.<em><code>{ generate: { routes: [ '/?prune=true' ] } }</code></em></li>\n</ul>\n</li>\n<li><code>headers-exist</code>: prune based on<strong>one or more header</strong>, tests<code>key / value</code>based on<code>headersToPrune / headersToExcludePrune</code>.</li>\n</ul>\n<p>N.B.:<em>It's possibile to mix different types.</em></p>\n<hr>\n<h3>Related things you should know</h3>\n<ul>\n<li>Nuxt &lt;a href="https://nuxtjs.org/api/configuration-hooks/"&gt;hooks, the plugin has access to<code>request.headers</code>only if the project is<strong>running as a server</strong>(ex.<code>nuxt start</code>)\n<ul>\n<li>If you<code>generate</code>your site it's not possibile to check<em>request.headers</em>, so (for<code>types: [ 'default-detect', 'headers-exist' ]</code>) it<strong>always prune</strong>, but You can disable this behavior by setting<code>hookGeneratePage</code>to<code>false</code>(or by using the type<code>query-parameters</code>);</li>\n</ul>\n</li>\n<li>Usage with<code>types: [ 'default-detect' ]</code>, load the &lt;a href="https://hgoebl.github.io/mobile-detect.js/"&gt;MobileDetectlibrary;</li>\n<li>It use &lt;a href="https://github.com/cheeriojs/cheerio"&gt;Cheerio,<em>jQuery for servers</em>, library to<strong>filter and prune</strong>the html.</li>\n</ul>\n<hr>\n<h3>Advices</h3>\n<ul>\n<li>Before setting up the module, try to &lt;a href="https://developers.google.com/web/tools/chrome-devtools/javascript/disable"&gt;Disable JavaScript With Chrome DevToolswhile navigate your website,<strong>this is how your website appear (when<em>nuxt-prune-html</em>is enabled)</strong>;</li>\n<li>For &lt;a href="https://nuxtjs.org/api/components-client-only/"&gt;<code>&lt;client-only&gt;</code>componentsyou should prepare a version that is visually the same with the &lt;a href="https://nuxtjs.org/api/components-client-only/"&gt;placeholder slot;</li>\n<li>You can check the website as a<em>GoogleBot</em>, following &lt;a href="https://developers.google.com/web/tools/chrome-devtools/device-mode/override-user-agent"&gt;this guide.</li>\n</ul>\n<hr>\n<h2>👩🏻‍💻👨🏻‍💻 Development</h2>\n<ol>\n<li><strong>Clone</strong>the repository:\n<ul>\n<li><code>git clone https://github.com/LuXDAmore/nuxt-prune-html.git</code>;</li>\n</ul>\n</li>\n<li><strong>Install</strong>dependencies:\n<ul>\n<li><code>yarn install</code>(or<code>npm install</code>);</li>\n</ul>\n</li>\n<li><strong>Start</strong>a development server:\n<ul>\n<li><code>yarn dev</code>(or<code>npm run dev</code>);</li>\n</ul>\n</li>\n<li><strong>Test</strong>your code:\n<ul>\n<li><code>yarn test</code>(or<code>npm run test</code>);</li>\n</ul>\n</li>\n<li><strong>Extra</strong>, generate the documentation (&lt;a href="https://pages.github.com/"&gt;<em>Github Pages</em>):\n<ul>\n<li><code>yarn generate</code>(or<code>npm run generate</code>);</li>\n<li><em>the content is automatically generated into the<code>/docs</code>folder</em>.</li>\n</ul>\n</li>\n</ol>\n<h2>🐞 Issues</h2>\n<p>Please make sure to read the &lt;a href="./.github/ISSUE_TEMPLATE/bug_report.md"&gt;<strong>issue reporting checklist</strong>before opening an issue.<br>\n<em>Issues not conforming to the guidelines may be closed immediately</em>.</p>\n<h2>📝 Discussions</h2>\n<p>We're using &lt;a href="https://github.com/LuXDAmore/nuxt-prune-html/discussions"&gt;<strong>Github discussions</strong>as a place to connect with other members of our community.<br>\n<em>You are free to ask questions and share ideas, so enjoy yourself</em>.</p>\n<h2>👥 Contribution</h2>\n<p>Please make sure to read the &lt;a href="./.github/ISSUE_TEMPLATE/feature_request.md"&gt;<strong>contributing guide</strong>before making a pull request.</p>\n<h2>📖 Changelog</h2>\n<p>Details changes for each release are documented in the &lt;a href="./CHANGELOG.md"&gt;<strong>release notes</strong>.</p>\n<h3>🆓 License</h3>\n<p>&lt;a href="./LICENSE"&gt;MIT License// Copyright (©) 2019-now &lt;a href="https://lucaiaconelli.it"&gt;Luca Iaconelli</p>\n<h4>💼 Hire me</h4>\n<p>&lt;a href="https://curriculumvitae.lucaiaconelli.it"&gt;&lt;img src="https://img.shields.io/badge/Contact%20Me-Let's%20Talk-informational?style=social&amp;logo=minutemailer" alt="Contacts"&gt;</p>\n<h4>💸 Are you feeling generous today?</h4>\n<p>If You want to share a beer, we can be really good friends 😄</p>\n<p><strong>&lt;a href="https://www.paypal.me/luxdamore"&gt;Paypal// &lt;a href="https://www.patreon.com/luxdamore"&gt;Patreon// &lt;a href="https://ko-fi.com/luxdamore"&gt;Ko-fi</strong></p>\n<blockquote>\n<p>☀<em>It's always a good day to be magnanimous</em>- cit.</p>\n</blockquote>\n</section>\n";<p></p>\n</section>\n";<p></p>\n</section>\n";<p></p>\n</section>\n";<p></p>\n</section>\n";</section></article></main></div></div></body></html>